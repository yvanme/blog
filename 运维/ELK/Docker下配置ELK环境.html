<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.fb1232a2.js" as="script"><link rel="preload" href="/assets/js/2.7b8aa595.js" as="script"><link rel="preload" href="/assets/js/126.d45e23a4.js" as="script"><link rel="prefetch" href="/assets/js/10.3956e9c0.js"><link rel="prefetch" href="/assets/js/100.45907d98.js"><link rel="prefetch" href="/assets/js/101.a1979b5a.js"><link rel="prefetch" href="/assets/js/102.ad62e1ec.js"><link rel="prefetch" href="/assets/js/103.5bc4f2e3.js"><link rel="prefetch" href="/assets/js/104.f0c1d426.js"><link rel="prefetch" href="/assets/js/105.b8acab66.js"><link rel="prefetch" href="/assets/js/106.63abceda.js"><link rel="prefetch" href="/assets/js/107.040f8404.js"><link rel="prefetch" href="/assets/js/108.ce6e7445.js"><link rel="prefetch" href="/assets/js/109.838e9810.js"><link rel="prefetch" href="/assets/js/11.32a5c154.js"><link rel="prefetch" href="/assets/js/110.c4916867.js"><link rel="prefetch" href="/assets/js/111.4ef4ce76.js"><link rel="prefetch" href="/assets/js/112.fc879400.js"><link rel="prefetch" href="/assets/js/113.6d34c3c8.js"><link rel="prefetch" href="/assets/js/114.41fd81aa.js"><link rel="prefetch" href="/assets/js/115.230b4582.js"><link rel="prefetch" href="/assets/js/116.cf904c82.js"><link rel="prefetch" href="/assets/js/117.0bd414ac.js"><link rel="prefetch" href="/assets/js/118.1f2e5268.js"><link rel="prefetch" href="/assets/js/119.93ce1fca.js"><link rel="prefetch" href="/assets/js/12.de3d20c3.js"><link rel="prefetch" href="/assets/js/120.1a20598b.js"><link rel="prefetch" href="/assets/js/121.4a71ce3e.js"><link rel="prefetch" href="/assets/js/122.cc0e457c.js"><link rel="prefetch" href="/assets/js/123.3291326b.js"><link rel="prefetch" href="/assets/js/124.daaeeaf2.js"><link rel="prefetch" href="/assets/js/125.b9c4c654.js"><link rel="prefetch" href="/assets/js/127.6f8ed00e.js"><link rel="prefetch" href="/assets/js/128.6269e16a.js"><link rel="prefetch" href="/assets/js/129.ad542cd9.js"><link rel="prefetch" href="/assets/js/13.3b9575bd.js"><link rel="prefetch" href="/assets/js/130.13b86e9c.js"><link rel="prefetch" href="/assets/js/131.3d619705.js"><link rel="prefetch" href="/assets/js/132.db852035.js"><link rel="prefetch" href="/assets/js/133.50e8050a.js"><link rel="prefetch" href="/assets/js/134.6c853199.js"><link rel="prefetch" href="/assets/js/135.5199a333.js"><link rel="prefetch" href="/assets/js/136.a7ea5608.js"><link rel="prefetch" href="/assets/js/137.65a7ac46.js"><link rel="prefetch" href="/assets/js/138.b42f2c59.js"><link rel="prefetch" href="/assets/js/139.dd423465.js"><link rel="prefetch" href="/assets/js/14.93d9a772.js"><link rel="prefetch" href="/assets/js/140.3f4b5066.js"><link rel="prefetch" href="/assets/js/141.123781cc.js"><link rel="prefetch" href="/assets/js/142.dd95d97e.js"><link rel="prefetch" href="/assets/js/143.fdd9587d.js"><link rel="prefetch" href="/assets/js/144.09e19455.js"><link rel="prefetch" href="/assets/js/145.f3d181fe.js"><link rel="prefetch" href="/assets/js/146.d2b11381.js"><link rel="prefetch" href="/assets/js/147.f7616895.js"><link rel="prefetch" href="/assets/js/148.7e86887d.js"><link rel="prefetch" href="/assets/js/149.1a39fccd.js"><link rel="prefetch" href="/assets/js/15.148492d0.js"><link rel="prefetch" href="/assets/js/150.b93bc087.js"><link rel="prefetch" href="/assets/js/151.ba3d0503.js"><link rel="prefetch" href="/assets/js/152.82e9f2f9.js"><link rel="prefetch" href="/assets/js/153.251ab7b1.js"><link rel="prefetch" href="/assets/js/154.c500794f.js"><link rel="prefetch" href="/assets/js/155.53f7b163.js"><link rel="prefetch" href="/assets/js/156.d1cd35c4.js"><link rel="prefetch" href="/assets/js/157.2edb721e.js"><link rel="prefetch" href="/assets/js/158.7e65c935.js"><link rel="prefetch" href="/assets/js/159.c37b9c3e.js"><link rel="prefetch" href="/assets/js/16.00c9741a.js"><link rel="prefetch" href="/assets/js/160.4c05d797.js"><link rel="prefetch" href="/assets/js/161.79955dc4.js"><link rel="prefetch" href="/assets/js/162.8d334156.js"><link rel="prefetch" href="/assets/js/163.599fae50.js"><link rel="prefetch" href="/assets/js/164.686f71b9.js"><link rel="prefetch" href="/assets/js/165.b8a2d10e.js"><link rel="prefetch" href="/assets/js/166.1c4547c2.js"><link rel="prefetch" href="/assets/js/167.7cdb8a0b.js"><link rel="prefetch" href="/assets/js/168.a32aaaf5.js"><link rel="prefetch" href="/assets/js/169.63d00475.js"><link rel="prefetch" href="/assets/js/17.620c1837.js"><link rel="prefetch" href="/assets/js/170.36c1e757.js"><link rel="prefetch" href="/assets/js/171.45f1ab8c.js"><link rel="prefetch" href="/assets/js/172.66de6c52.js"><link rel="prefetch" href="/assets/js/173.cbf880ca.js"><link rel="prefetch" href="/assets/js/174.2401f327.js"><link rel="prefetch" href="/assets/js/175.064fc180.js"><link rel="prefetch" href="/assets/js/176.d18d0ca2.js"><link rel="prefetch" href="/assets/js/177.7b006416.js"><link rel="prefetch" href="/assets/js/178.74c264b7.js"><link rel="prefetch" href="/assets/js/179.1308e968.js"><link rel="prefetch" href="/assets/js/18.3cd79d74.js"><link rel="prefetch" href="/assets/js/180.5ff7154e.js"><link rel="prefetch" href="/assets/js/181.0f518132.js"><link rel="prefetch" href="/assets/js/19.06908f6b.js"><link rel="prefetch" href="/assets/js/20.61b51eb5.js"><link rel="prefetch" href="/assets/js/21.feab52c3.js"><link rel="prefetch" href="/assets/js/22.3a158ad1.js"><link rel="prefetch" href="/assets/js/23.9d5a5381.js"><link rel="prefetch" href="/assets/js/24.6aee6956.js"><link rel="prefetch" href="/assets/js/25.379fdda3.js"><link rel="prefetch" href="/assets/js/26.a0dc095e.js"><link rel="prefetch" href="/assets/js/27.b7eac53d.js"><link rel="prefetch" href="/assets/js/28.9407dd73.js"><link rel="prefetch" href="/assets/js/29.0bce04d8.js"><link rel="prefetch" href="/assets/js/3.9bab7b5b.js"><link rel="prefetch" href="/assets/js/30.491721cd.js"><link rel="prefetch" href="/assets/js/31.97769a88.js"><link rel="prefetch" href="/assets/js/32.bbac853a.js"><link rel="prefetch" href="/assets/js/33.0a598568.js"><link rel="prefetch" href="/assets/js/34.7b0bd00e.js"><link rel="prefetch" href="/assets/js/35.77c6e609.js"><link rel="prefetch" href="/assets/js/36.6a089f7c.js"><link rel="prefetch" href="/assets/js/37.be5e5cee.js"><link rel="prefetch" href="/assets/js/38.17772da1.js"><link rel="prefetch" href="/assets/js/39.7967c09f.js"><link rel="prefetch" href="/assets/js/4.ba3164ba.js"><link rel="prefetch" href="/assets/js/40.0be77dd9.js"><link rel="prefetch" href="/assets/js/41.44eec76e.js"><link rel="prefetch" href="/assets/js/42.a31a2f83.js"><link rel="prefetch" href="/assets/js/43.10bbf2e5.js"><link rel="prefetch" href="/assets/js/44.866c8b9f.js"><link rel="prefetch" href="/assets/js/45.8838049f.js"><link rel="prefetch" href="/assets/js/46.17135848.js"><link rel="prefetch" href="/assets/js/47.eebc0603.js"><link rel="prefetch" href="/assets/js/48.d4621e71.js"><link rel="prefetch" href="/assets/js/49.7561c10b.js"><link rel="prefetch" href="/assets/js/5.75a3592b.js"><link rel="prefetch" href="/assets/js/50.abe160b3.js"><link rel="prefetch" href="/assets/js/51.ea0f774b.js"><link rel="prefetch" href="/assets/js/52.39574502.js"><link rel="prefetch" href="/assets/js/53.cc357b92.js"><link rel="prefetch" href="/assets/js/54.f00e3ef9.js"><link rel="prefetch" href="/assets/js/55.1daf4eac.js"><link rel="prefetch" href="/assets/js/56.6d3f3023.js"><link rel="prefetch" href="/assets/js/57.2ded9a0a.js"><link rel="prefetch" href="/assets/js/58.0c6af46a.js"><link rel="prefetch" href="/assets/js/59.54f2a062.js"><link rel="prefetch" href="/assets/js/6.0377ba0c.js"><link rel="prefetch" href="/assets/js/60.97fd32e4.js"><link rel="prefetch" href="/assets/js/61.e98e89ef.js"><link rel="prefetch" href="/assets/js/62.e3e3b8fe.js"><link rel="prefetch" href="/assets/js/63.0c8bb4c3.js"><link rel="prefetch" href="/assets/js/64.7105ef89.js"><link rel="prefetch" href="/assets/js/65.cf181aa0.js"><link rel="prefetch" href="/assets/js/66.5da64f7b.js"><link rel="prefetch" href="/assets/js/67.44e3ae6e.js"><link rel="prefetch" href="/assets/js/68.8392d4df.js"><link rel="prefetch" href="/assets/js/69.5c27b612.js"><link rel="prefetch" href="/assets/js/7.b533326e.js"><link rel="prefetch" href="/assets/js/70.0d315182.js"><link rel="prefetch" href="/assets/js/71.d9bd06ce.js"><link rel="prefetch" href="/assets/js/72.81b096f4.js"><link rel="prefetch" href="/assets/js/73.f99580df.js"><link rel="prefetch" href="/assets/js/74.11be9ffd.js"><link rel="prefetch" href="/assets/js/75.31a13e5b.js"><link rel="prefetch" href="/assets/js/76.1cad8b67.js"><link rel="prefetch" href="/assets/js/77.95931e9e.js"><link rel="prefetch" href="/assets/js/78.9b76df26.js"><link rel="prefetch" href="/assets/js/79.ddd62d67.js"><link rel="prefetch" href="/assets/js/8.adc8009a.js"><link rel="prefetch" href="/assets/js/80.617e3440.js"><link rel="prefetch" href="/assets/js/81.557a7211.js"><link rel="prefetch" href="/assets/js/82.7f622558.js"><link rel="prefetch" href="/assets/js/83.94b176c9.js"><link rel="prefetch" href="/assets/js/84.79ed3c3b.js"><link rel="prefetch" href="/assets/js/85.46b0b367.js"><link rel="prefetch" href="/assets/js/86.dc0cc4b8.js"><link rel="prefetch" href="/assets/js/87.102663c7.js"><link rel="prefetch" href="/assets/js/88.8152456c.js"><link rel="prefetch" href="/assets/js/89.a132daa9.js"><link rel="prefetch" href="/assets/js/9.01942828.js"><link rel="prefetch" href="/assets/js/90.d320e71a.js"><link rel="prefetch" href="/assets/js/91.02446897.js"><link rel="prefetch" href="/assets/js/92.187a4d7c.js"><link rel="prefetch" href="/assets/js/93.6fb76df5.js"><link rel="prefetch" href="/assets/js/94.b84d2ff0.js"><link rel="prefetch" href="/assets/js/95.147b7ce5.js"><link rel="prefetch" href="/assets/js/96.d2054dbf.js"><link rel="prefetch" href="/assets/js/97.8147f97a.js"><link rel="prefetch" href="/assets/js/98.c6b18cd9.js"><link rel="prefetch" href="/assets/js/99.09bf6d3d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Docker下配置ELK环境</p> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>[TOC]</p> <p><strong>主机配置:</strong></p> <table><thead><tr><th>主机名</th> <th>IP地址</th></tr></thead> <tbody><tr><td>worker</td> <td>192.168.153.136</td></tr></tbody></table> <p><strong>系统：CentOS7</strong></p> <p><strong>ELK版本：7.8.1</strong></p> <p><strong>1. ELK配置</strong></p> <ul><li>filebeat.yml</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">###################### Filebeat Configuration Example #########################</span>

<span class="token comment"># This file is an example configuration file highlighting only the most common</span>
<span class="token comment"># options. The filebeat.reference.yml file from the same directory contains all the</span>
<span class="token comment"># supported options with more comments. You can use it as a reference.</span>
<span class="token comment">#</span>
<span class="token comment"># You can find the full configuration reference here:</span>
<span class="token comment"># https://www.elastic.co/guide/en/beats/filebeat/index.html</span>

<span class="token comment"># For more available modules and options, please see the filebeat.reference.yml sample</span>
<span class="token comment"># configuration file.</span>

<span class="token comment"># ============================== Filebeat inputs ===============================</span>

<span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span>

<span class="token comment"># Each - is an input. Most options can be set at the input level, so</span>
<span class="token comment"># you can use different inputs for various configurations.</span>
<span class="token comment"># Below are the input specific configurations.</span>

<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log

  <span class="token comment"># Change to true to enable this input configuration.</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

  <span class="token comment"># Paths that should be crawled and fetched. Glob based paths.</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /apps/filebeat/<span class="token important">*.log</span>
    <span class="token comment">#- c:\programdata\elasticsearch\logs\*</span>

  <span class="token comment"># Exclude lines. A list of regular expressions to match. It drops the lines that are</span>
  <span class="token comment"># matching any regular expression from the list.</span>
  <span class="token comment">#exclude_lines: ['^DBG']</span>

  <span class="token comment"># Include lines. A list of regular expressions to match. It exports the lines that are</span>
  <span class="token comment"># matching any regular expression from the list.</span>
  <span class="token comment">#include_lines: ['^ERR', '^WARN']</span>

  <span class="token comment"># Exclude files. A list of regular expressions to match. Filebeat drops the files that</span>
  <span class="token comment"># are matching any regular expression from the list. By default, no files are dropped.</span>
  <span class="token comment">#exclude_files: ['.gz$']</span>

  <span class="token comment"># Optional additional fields. These fields can be freely picked</span>
  <span class="token comment"># to add additional information to the crawled log files for filtering</span>
  <span class="token comment">#fields:</span>
  <span class="token comment">#  level: debug</span>
  <span class="token comment">#  review: 1</span>

  <span class="token comment">### Multiline options</span>

  <span class="token comment"># Multiline can be used for log messages spanning multiple lines. This is common</span>
  <span class="token comment"># for Java Stack Traces or C-Line Continuation</span>

  <span class="token comment"># The regexp Pattern that has to be matched. The example pattern matches all lines starting with [</span>
  <span class="token comment">#multiline.pattern: ^\[</span>

  <span class="token comment"># Defines if the pattern set under pattern should be negated or not. Default is false.</span>
  <span class="token comment">#multiline.negate: false</span>

  <span class="token comment"># Match can be set to &quot;after&quot; or &quot;before&quot;. It is used to define if lines should be append to a pattern</span>
  <span class="token comment"># that was (not) matched before or after or as long as a pattern is not matched based on negate.</span>
  <span class="token comment"># Note: After is the equivalent to previous and before is the equivalent to to next in Logstash</span>
  <span class="token comment">#multiline.match: after</span>

<span class="token comment"># ============================== Filebeat modules ==============================</span>

<span class="token key atrule">filebeat.config.modules</span><span class="token punctuation">:</span>
  <span class="token comment"># Glob pattern for configuration loading</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>path.config<span class="token punctuation">}</span>/modules.d/<span class="token important">*.yml</span>

  <span class="token comment"># Set to true to enable config reloading</span>
  <span class="token key atrule">reload.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

  <span class="token comment"># Period on which files under path should be checked for changes</span>
  <span class="token comment">#reload.period: 10s</span>

<span class="token comment"># ======================= Elasticsearch template setting =======================</span>

<span class="token key atrule">setup.template.settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">index.number_of_shards</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment">#index.codec: best_compression</span>
  <span class="token comment">#_source.enabled: false</span>


<span class="token comment"># ================================== General ===================================</span>

<span class="token comment"># The name of the shipper that publishes the network data. It can be used to group</span>
<span class="token comment"># all the transactions sent by a single shipper in the web interface.</span>
<span class="token comment">#name:</span>

<span class="token comment"># The tags of the shipper are included in their own field with each</span>
<span class="token comment"># transaction published.</span>
<span class="token comment">#tags: [&quot;service-X&quot;, &quot;web-tier&quot;]</span>

<span class="token comment"># Optional fields that you can specify to add additional information to the</span>
<span class="token comment"># output.</span>
<span class="token comment">#fields:</span>
<span class="token comment">#  env: staging</span>

<span class="token comment"># ================================= Dashboards =================================</span>
<span class="token comment"># These settings control loading the sample dashboards to the Kibana index. Loading</span>
<span class="token comment"># the dashboards is disabled by default and can be enabled either by setting the</span>
<span class="token comment"># options here or by using the `setup` command.</span>
<span class="token comment">#setup.dashboards.enabled: false</span>

<span class="token comment"># The URL from where to download the dashboards archive. By default this URL</span>
<span class="token comment"># has a value which is computed based on the Beat name and version. For released</span>
<span class="token comment"># versions, this URL points to the dashboard archive on the artifacts.elastic.co</span>
<span class="token comment"># website.</span>
<span class="token comment">#setup.dashboards.url:</span>

<span class="token comment"># =================================== Kibana ===================================</span>

<span class="token comment"># Starting with Beats version 6.0.0, the dashboards are loaded via the Kibana API.</span>
<span class="token comment"># This requires a Kibana endpoint configuration.</span>
<span class="token key atrule">setup.kibana</span><span class="token punctuation">:</span>

  <span class="token comment"># Kibana Host</span>
  <span class="token comment"># Scheme and port can be left out and will be set to the default (http and 5601)</span>
  <span class="token comment"># In case you specify and additional path, the scheme is required: http://localhost:5601/path</span>
  <span class="token comment"># IPv6 addresses should always be defined as: https://[2001:db8::1]:5601</span>
  <span class="token comment">#host: &quot;localhost:5601&quot;</span>

  <span class="token comment"># Kibana Space ID</span>
  <span class="token comment"># ID of the Kibana Space into which the dashboards should be loaded. By default,</span>
  <span class="token comment"># the Default Space will be used.</span>
  <span class="token comment">#space.id:</span>

<span class="token comment"># =============================== Elastic Cloud ================================</span>

<span class="token comment"># These settings simplify using Filebeat with the Elastic Cloud (https://cloud.elastic.co/).</span>

<span class="token comment"># The cloud.id setting overwrites the `output.elasticsearch.hosts` and</span>
<span class="token comment"># `setup.kibana.host` options.</span>
<span class="token comment"># You can find the `cloud.id` in the Elastic Cloud web UI.</span>
<span class="token comment">#cloud.id:</span>

<span class="token comment"># The cloud.auth setting overwrites the `output.elasticsearch.username` and</span>
<span class="token comment"># `output.elasticsearch.password` settings. The format is `&lt;user&gt;:&lt;pass&gt;`.</span>
<span class="token comment">#cloud.auth:</span>

<span class="token comment"># ================================== Outputs ===================================</span>

<span class="token comment"># Configure what output to use when sending the data collected by the beat.</span>

<span class="token comment"># ---------------------------- Elasticsearch Output ----------------------------</span>
<span class="token comment">#output.elasticsearch:</span>
  <span class="token comment"># Array of hosts to connect to.</span>
  <span class="token comment">#hosts: [&quot;localhost:9200&quot;]</span>

  <span class="token comment"># Protocol - either `http` (default) or `https`.</span>
  <span class="token comment">#protocol: &quot;https&quot;</span>

  <span class="token comment"># Authentication credentials - either API key or username/password.</span>
  <span class="token comment">#api_key: &quot;id:api_key&quot;</span>
  <span class="token comment">#username: &quot;elastic&quot;</span>
  <span class="token comment">#password: &quot;changeme&quot;</span>

<span class="token comment"># ------------------------------ Logstash Output -------------------------------</span>
<span class="token key atrule">output.logstash</span><span class="token punctuation">:</span>
  <span class="token comment"># The Logstash hosts</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;www.sunrat.com:5044&quot;</span><span class="token punctuation">]</span>

  <span class="token comment"># Optional SSL. By default is off.</span>
  <span class="token comment"># List of root certificates for HTTPS server verifications</span>
  <span class="token comment">#ssl.certificate_authorities: [&quot;/etc/pki/root/ca.pem&quot;]</span>

  <span class="token comment"># Certificate for SSL client authentication</span>
  <span class="token comment">#ssl.certificate: &quot;/etc/pki/client/cert.pem&quot;</span>

  <span class="token comment"># Client Certificate Key</span>
  <span class="token comment">#ssl.key: &quot;/etc/pki/client/cert.key&quot;</span>
<span class="token comment"># ------------------------------- Console Output -------------------------------</span>
<span class="token comment">#output.console:</span>
  <span class="token comment"># Boolean flag to enable or disable the output module.</span>
<span class="token comment">#  enabled: true</span>

  <span class="token comment"># Configure JSON encoding</span>
<span class="token comment">#  codec.json:</span>
    <span class="token comment"># Pretty-print JSON event</span>
 <span class="token comment">#   pretty: true</span>

    <span class="token comment"># Configure escaping HTML symbols in strings.</span>
    <span class="token comment">#escape_html: false</span>
<span class="token comment"># ================================= Processors =================================</span>

<span class="token comment"># Configure processors to enhance or manipulate events generated by the beat.</span>

<span class="token key atrule">processors</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">add_host_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span>
  <span class="token punctuation">-</span> <span class="token key atrule">add_cloud_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span>
  <span class="token punctuation">-</span> <span class="token key atrule">add_docker_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span>
  <span class="token punctuation">-</span> <span class="token key atrule">add_kubernetes_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span>


<span class="token comment"># ================================== Logging ===================================</span>

<span class="token comment"># Sets log level. The default log level is info.</span>
<span class="token comment"># Available log levels are: error, warning, info, debug</span>
<span class="token comment">#logging.level: debug</span>

<span class="token comment"># At debug level, you can selectively enable logging only for some components.</span>
<span class="token comment"># To enable all selectors use [&quot;*&quot;]. Examples of other selectors are &quot;beat&quot;,</span>
<span class="token comment"># &quot;publish&quot;, &quot;service&quot;.</span>
<span class="token comment">#logging.selectors: [&quot;*&quot;]</span>

<span class="token comment"># ============================= X-Pack Monitoring ==============================</span>
<span class="token comment"># Filebeat can export internal metrics to a central Elasticsearch monitoring</span>
<span class="token comment"># cluster.  This requires xpack monitoring to be enabled in Elasticsearch.  The</span>
<span class="token comment"># reporting is disabled by default.</span>

<span class="token comment"># Set to true to enable the monitoring reporter.</span>
<span class="token comment">#monitoring.enabled: false</span>

<span class="token comment"># Sets the UUID of the Elasticsearch cluster under which monitoring data for this</span>
<span class="token comment"># Filebeat instance will appear in the Stack Monitoring UI. If output.elasticsearch</span>
<span class="token comment"># is enabled, the UUID is derived from the Elasticsearch cluster referenced by output.elasticsearch.</span>
<span class="token comment">#monitoring.cluster_uuid:</span>

<span class="token comment"># Uncomment to send the metrics to Elasticsearch. Most settings from the</span>
<span class="token comment"># Elasticsearch output are accepted here as well.</span>
<span class="token comment"># Note that the settings should point to your Elasticsearch *monitoring* cluster.</span>
<span class="token comment"># Any setting that is not set is automatically inherited from the Elasticsearch</span>
<span class="token comment"># output configuration, so if you have the Elasticsearch output configured such</span>
<span class="token comment"># that it is pointing to your Elasticsearch monitoring cluster, you can simply</span>
<span class="token comment"># uncomment the following line.</span>
<span class="token comment">#monitoring.elasticsearch:</span>

<span class="token comment"># ================================= Migration ==================================</span>

<span class="token comment"># This allows to enable 6.7 migration aliases</span>
<span class="token comment">#migration.6_to_7.enabled: true</span>
</code></pre></div><ul><li>logstash.conf</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Sample Logstash configuration for creating a simple</span>
<span class="token comment"># Beats -&gt; Logstash -&gt; Elasticsearch pipeline.</span>
input <span class="token punctuation">{</span>
  beats <span class="token punctuation">{</span>
    port <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">5044</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

filter <span class="token punctuation">{</span>
  grok <span class="token punctuation">{</span>
    match <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token string">&quot;message&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;%{COMBINEDAPACHELOG}&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">date</span> <span class="token punctuation">{</span>
    match <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span> <span class="token string">&quot;timestamp&quot;</span> , <span class="token string">&quot;dd/MMM/yyyy:HH:mm:ss Z&quot;</span> <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
output <span class="token punctuation">{</span>
  elasticsearch <span class="token punctuation">{</span>
    hosts <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;http://www.sunrat.com:9200&quot;</span><span class="token punctuation">]</span>
    index <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}&quot;</span>
    <span class="token comment">#user =&gt; &quot;elastic&quot;</span>
    <span class="token comment">#password =&gt; &quot;changeme&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>pipelines.yml</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># List of pipelines to be loaded by Logstash</span>
<span class="token comment">#</span>
<span class="token comment"># This document must be a list of dictionaries/hashes, where the keys/values are pipeline settings.</span>
<span class="token comment"># Default values for omitted settings are read from the `logstash.yml` file.</span>
<span class="token comment"># When declaring multiple pipelines, each MUST have its own `pipeline.id`.</span>
<span class="token comment">#</span>
<span class="token comment"># Example of two pipelines:</span>
<span class="token comment">#</span>
 <span class="token punctuation">-</span> <span class="token key atrule">pipeline.id</span><span class="token punctuation">:</span> test
   <span class="token key atrule">pipeline.workers</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token comment">#   pipeline.batch.size: 1</span>
<span class="token comment">#   config.string: &quot;input { generator {} } filter { sleep { time =&gt; 1 } } output { stdout { codec =&gt; dots } }&quot;</span>
<span class="token comment"># - pipeline.id: another_test</span>
<span class="token comment">#   queue.type: persisted</span>
   <span class="token key atrule">path.config</span><span class="token punctuation">:</span> <span class="token string">&quot;/usr/share/logstash/config/logstash.conf&quot;</span>
<span class="token comment">#</span>
<span class="token comment"># Available options:</span>
<span class="token comment">#</span>
<span class="token comment">#   # name of the pipeline</span>
<span class="token comment">#   pipeline.id: mylogs</span>
<span class="token comment">#</span>
<span class="token comment">#   # The configuration string to be used by this pipeline</span>
<span class="token comment">#   config.string: &quot;input { generator {} } filter { sleep { time =&gt; 1 } } output { stdout { codec =&gt; dots } }&quot;</span>
<span class="token comment">#</span>
<span class="token comment">#   # The path from where to read the configuration text</span>
<span class="token comment">#   path.config: &quot;/etc/conf.d/logstash/myconfig.cfg&quot;</span>
<span class="token comment">#</span>
<span class="token comment">#   # How many worker threads execute the Filters+Outputs stage of the pipeline</span>
<span class="token comment">#   pipeline.workers: 1 (actually defaults to number of CPUs)</span>
<span class="token comment">#</span>
<span class="token comment">#   # How many events to retrieve from inputs before sending to filters+workers</span>
<span class="token comment">#   pipeline.batch.size: 125</span>
<span class="token comment">#</span>
<span class="token comment">#   # How long to wait in milliseconds while polling for the next event</span>
<span class="token comment">#   # before dispatching an undersized batch to filters+outputs</span>
<span class="token comment">#   pipeline.batch.delay: 50</span>
<span class="token comment">#</span>
<span class="token comment">#   # Internal queuing model, &quot;memory&quot; for legacy in-memory based queuing and</span>
<span class="token comment">#   # &quot;persisted&quot; for disk-based acked queueing. Defaults is memory</span>
<span class="token comment">#   queue.type: memory</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the page data files size. The queue data consists of</span>
<span class="token comment">#   # append-only data files separated into pages. Default is 64mb</span>
<span class="token comment">#   queue.page_capacity: 64mb</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the maximum number of unread events in the queue.</span>
<span class="token comment">#   # Default is 0 (unlimited)</span>
<span class="token comment">#   queue.max_events: 0</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the total capacity of the queue in number of bytes.</span>
<span class="token comment">#   # Default is 1024mb or 1gb</span>
<span class="token comment">#   queue.max_bytes: 1024mb</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the maximum number of acked events before forcing a checkpoint</span>
<span class="token comment">#   # Default is 1024, 0 for unlimited</span>
<span class="token comment">#   queue.checkpoint.acks: 1024</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the maximum number of written events before forcing a checkpoint</span>
<span class="token comment">#   # Default is 1024, 0 for unlimited</span>
<span class="token comment">#   queue.checkpoint.writes: 1024</span>
<span class="token comment">#</span>
<span class="token comment">#   # If using queue.type: persisted, the interval in milliseconds when a checkpoint is forced on the head page</span>
<span class="token comment">#   # Default is 1000, 0 for no periodic checkpoint.</span>
<span class="token comment">#   queue.checkpoint.interval: 1000</span>
<span class="token comment">#</span>
<span class="token comment">#   # Enable Dead Letter Queueing for this pipeline.</span>
<span class="token comment">#   dead_letter_queue.enable: false</span>
<span class="token comment">#</span>
<span class="token comment">#   If using dead_letter_queue.enable: true, the maximum size of dead letter queue for this pipeline. Entries</span>
<span class="token comment">#   will be dropped if they would increase the size of the dead letter queue beyond this setting.</span>
<span class="token comment">#   Default is 1024mb</span>
<span class="token comment">#   dead_letter_queue.max_bytes: 1024mb</span>
<span class="token comment">#</span>
<span class="token comment">#   If using dead_letter_queue.enable: true, the directory path where the data files will be stored.</span>
<span class="token comment">#   Default is path.data/dead_letter_queue</span>
<span class="token comment">#</span>
<span class="token comment">#   path.dead_letter_queue:</span>
</code></pre></div><ul><li>elasticsearch.yml(注意：es默认以elasticsearch，注意给data目录设置权限)</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># ======================== Elasticsearch Configuration =========================</span>
<span class="token comment">#</span>
<span class="token comment"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span>
<span class="token comment">#       Before you set out to tweak and tune the configuration, make sure you</span>
<span class="token comment">#       understand what are you trying to accomplish and the consequences.</span>
<span class="token comment">#</span>
<span class="token comment"># The primary way of configuring a node is via this file. This template lists</span>
<span class="token comment"># the most important settings you may want to configure for a production cluster.</span>
<span class="token comment">#</span>
<span class="token comment"># Please consult the documentation for further information on configuration options:</span>
<span class="token comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Cluster -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for your cluster:</span>
<span class="token comment">#</span>
<span class="token comment">#cluster.name: my-application</span>
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------ Node ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for the node:</span>
<span class="token comment">#</span>
<span class="token comment">#node.name: node-1</span>
<span class="token comment">#</span>
<span class="token comment"># Add custom attributes to the node:</span>
<span class="token comment">#</span>
<span class="token comment">#node.attr.rack: r1</span>
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Paths ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="token comment">#</span>
<span class="token comment">#path.data: /path/to/data</span>
<span class="token comment">#</span>
<span class="token comment"># Path to log files:</span>
<span class="token comment">#</span>
<span class="token comment">#path.logs: /path/to/logs</span>
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Memory -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Lock the memory on startup:</span>
<span class="token comment">#</span>
<span class="token comment">#bootstrap.memory_lock: true</span>
<span class="token comment">#</span>
<span class="token comment"># Make sure that the heap size is set to about half the memory available</span>
<span class="token comment"># on the system and that the owner of the process is allowed to use this</span>
<span class="token comment"># limit.</span>
<span class="token comment">#</span>
<span class="token comment"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Set the bind address to a specific IP (IPv4 or IPv6):</span>
<span class="token comment">#</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token comment">#</span>
<span class="token comment"># Set a custom port for HTTP:</span>
<span class="token comment">#</span>
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the network module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------- Discovery ----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<span class="token comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span>
<span class="token comment">#</span>
<span class="token comment">#discovery.seed_hosts: [&quot;host1&quot;, &quot;host2&quot;]</span>
<span class="token comment">#</span>
<span class="token comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<span class="token comment">#</span>
<span class="token comment">#cluster.initial_master_nodes: [&quot;node-1&quot;, &quot;node-2&quot;]</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the discovery and cluster formation module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Gateway -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Block initial recovery after a full cluster restart until N nodes are started:</span>
<span class="token comment">#</span>
<span class="token comment">#gateway.recover_after_nodes: 3</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the gateway module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Various -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Require explicit names when deleting indices:</span>
<span class="token comment">#</span>
<span class="token comment">#action.destructive_requires_name: true</span>
</code></pre></div><ul><li>kibana.yml</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># Kibana is served by a back end server. This setting specifies the port to use.</span>
<span class="token key atrule">server.port</span><span class="token punctuation">:</span> <span class="token number">5601</span>

<span class="token comment"># Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.</span>
<span class="token comment"># The default is 'localhost', which usually means remote machines will not be able to connect.</span>
<span class="token comment"># To allow connections from remote users, set this parameter to a non-loopback address.</span>
<span class="token key atrule">server.host</span><span class="token punctuation">:</span> <span class="token string">&quot;0.0.0.0&quot;</span>

<span class="token comment"># Enables you to specify a path to mount Kibana at if you are running behind a proxy.</span>
<span class="token comment"># Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath</span>
<span class="token comment"># from requests it receives, and to prevent a deprecation warning at startup.</span>
<span class="token comment"># This setting cannot end in a slash.</span>
<span class="token comment">#server.basePath: &quot;/&quot;</span>

<span class="token comment"># Specifies whether Kibana should rewrite requests that are prefixed with</span>
<span class="token comment"># `server.basePath` or require that they are rewritten by your reverse proxy.</span>
<span class="token comment"># This setting was effectively always `false` before Kibana 6.3 and will</span>
<span class="token comment"># default to `true` starting in Kibana 7.0.</span>
<span class="token key atrule">server.rewriteBasePath</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># The maximum payload size in bytes for incoming server requests.</span>
<span class="token key atrule">server.maxPayloadBytes</span><span class="token punctuation">:</span> <span class="token number">1048576</span>

<span class="token comment"># The Kibana server's name.  This is used for display purposes.</span>
<span class="token comment">#server.name: &quot;your-hostname&quot;</span>

<span class="token comment"># The URLs of the Elasticsearch instances to use for all your queries.</span>
<span class="token key atrule">elasticsearch.hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http://www.sunrat.com:9200&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># When this setting's value is true Kibana uses the hostname specified in the server.host</span>
<span class="token comment"># setting. When the value of this setting is false, Kibana uses the hostname of the host</span>
<span class="token comment"># that connects to this Kibana instance.</span>
<span class="token comment">#elasticsearch.preserveHost: true</span>

<span class="token comment"># Kibana uses an index in Elasticsearch to store saved searches, visualizations and</span>
<span class="token comment"># dashboards. Kibana creates a new index if the index doesn't already exist.</span>
<span class="token comment">#kibana.index: &quot;.kibana&quot;</span>

<span class="token comment"># The default application to load.</span>
<span class="token comment">#kibana.defaultAppId: &quot;home&quot;</span>

<span class="token comment"># If your Elasticsearch is protected with basic authentication, these settings provide</span>
<span class="token comment"># the username and password that the Kibana server uses to perform maintenance on the Kibana</span>
<span class="token comment"># index at startup. Your Kibana users still need to authenticate with Elasticsearch, which</span>
<span class="token comment"># is proxied through the Kibana server.</span>
<span class="token comment">#elasticsearch.username: &quot;kibana_system&quot;</span>
<span class="token comment">#elasticsearch.password: &quot;pass&quot;</span>

<span class="token comment"># Enables SSL and paths to the PEM-format SSL certificate and SSL key files, respectively.</span>
<span class="token comment"># These settings enable SSL for outgoing requests from the Kibana server to the browser.</span>
<span class="token comment">#server.ssl.enabled: false</span>
<span class="token comment">#server.ssl.certificate: /path/to/your/server.crt</span>
<span class="token comment">#server.ssl.key: /path/to/your/server.key</span>

<span class="token comment"># Optional settings that provide the paths to the PEM-format SSL certificate and key files.</span>
<span class="token comment"># These files are used to verify the identity of Kibana to Elasticsearch and are required when</span>
<span class="token comment"># xpack.security.http.ssl.client_authentication in Elasticsearch is set to required.</span>
<span class="token comment">#elasticsearch.ssl.certificate: /path/to/your/client.crt</span>
<span class="token comment">#elasticsearch.ssl.key: /path/to/your/client.key</span>

<span class="token comment"># Optional setting that enables you to specify a path to the PEM file for the certificate</span>
<span class="token comment"># authority for your Elasticsearch instance.</span>
<span class="token comment">#elasticsearch.ssl.certificateAuthorities: [ &quot;/path/to/your/CA.pem&quot; ]</span>

<span class="token comment"># To disregard the validity of SSL certificates, change this setting's value to 'none'.</span>
<span class="token comment">#elasticsearch.ssl.verificationMode: full</span>

<span class="token comment"># Time in milliseconds to wait for Elasticsearch to respond to pings. Defaults to the value of</span>
<span class="token comment"># the elasticsearch.requestTimeout setting.</span>
<span class="token comment">#elasticsearch.pingTimeout: 1500</span>

<span class="token comment"># Time in milliseconds to wait for responses from the back end or Elasticsearch. This value</span>
<span class="token comment"># must be a positive integer.</span>
<span class="token comment">#elasticsearch.requestTimeout: 30000</span>

<span class="token comment"># List of Kibana client-side headers to send to Elasticsearch. To send *no* client-side</span>
<span class="token comment"># headers, set this value to [] (an empty list).</span>
<span class="token comment">#elasticsearch.requestHeadersWhitelist: [ authorization ]</span>

<span class="token comment"># Header names and values that are sent to Elasticsearch. Any custom headers cannot be overwritten</span>
<span class="token comment"># by client-side headers, regardless of the elasticsearch.requestHeadersWhitelist configuration.</span>
<span class="token comment">#elasticsearch.customHeaders: {}</span>

<span class="token comment"># Time in milliseconds for Elasticsearch to wait for responses from shards. Set to 0 to disable.</span>
<span class="token comment">#elasticsearch.shardTimeout: 30000</span>

<span class="token comment"># Time in milliseconds to wait for Elasticsearch at Kibana startup before retrying.</span>
<span class="token comment">#elasticsearch.startupTimeout: 5000</span>

<span class="token comment"># Logs queries sent to Elasticsearch. Requires logging.verbose set to true.</span>
<span class="token comment">#elasticsearch.logQueries: false</span>

<span class="token comment"># Specifies the path where Kibana creates the process ID file.</span>
<span class="token comment">#pid.file: /var/run/kibana.pid</span>

<span class="token comment"># Enables you specify a file where Kibana stores log output.</span>
<span class="token comment">#logging.dest: stdout</span>

<span class="token comment"># Set the value of this setting to true to suppress all logging output.</span>
<span class="token comment">#logging.silent: false</span>

<span class="token comment"># Set the value of this setting to true to suppress all logging output other than error messages.</span>
<span class="token comment">#logging.quiet: false</span>

<span class="token comment"># Set the value of this setting to true to log all events, including system usage information</span>
<span class="token comment"># and all requests.</span>
<span class="token comment">#logging.verbose: false</span>

<span class="token comment"># Set the interval in milliseconds to sample system and process performance</span>
<span class="token comment"># metrics. Minimum is 100ms. Defaults to 5000.</span>
<span class="token comment">#ops.interval: 5000</span>

<span class="token comment"># Specifies locale to be used for all localizable strings, dates and number formats.</span>
<span class="token comment"># Supported languages are the following: English - en , by default , Chinese - zh-CN .</span>
<span class="token comment">#i18n.locale: &quot;en&quot;</span>
</code></pre></div><ul><li>docker-compose.yml</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># yaml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">filebeat</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/beats/filebeat<span class="token punctuation">:</span>7.8.1
    <span class="token key atrule">user</span><span class="token punctuation">:</span> root
<span class="token comment">#    ports:</span>
<span class="token comment">#      - 9200:9200</span>
<span class="token comment">#      - 9300:9300</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> strict.perms=false 
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /apps/filebeat<span class="token punctuation">-</span>7.8.1<span class="token punctuation">-</span>linux<span class="token punctuation">-</span>x86_64/filebeat.yml<span class="token punctuation">:</span>/usr/share/filebeat/filebeat.yml 
      <span class="token punctuation">-</span> /apps/filebeat<span class="token punctuation">-</span>7.8.1<span class="token punctuation">-</span>linux<span class="token punctuation">-</span>x86_64/logs<span class="token punctuation">:</span>/apps/filebeat
    <span class="token key atrule">extra_hosts</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> www.sunrat.com<span class="token punctuation">:</span>192.168.153.136
    <span class="token key atrule">links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> logstash        
  <span class="token key atrule">logstash</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/logstash/logstash<span class="token punctuation">:</span>7.8.1
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5044<span class="token punctuation">:</span><span class="token number">5044</span>
<span class="token comment">#    environment:</span>
<span class="token comment">#      - discovery.type=single-node </span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /apps/logstash<span class="token punctuation">-</span>7.8.1/logstash.conf<span class="token punctuation">:</span>/usr/share/logstash/config/logstash.conf 
      <span class="token punctuation">-</span> /apps/logstash<span class="token punctuation">-</span>7.8.1/pipelines.yml<span class="token punctuation">:</span>/usr/share/logstash/config/pipelines.yml 
    <span class="token key atrule">extra_hosts</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> www.sunrat.com<span class="token punctuation">:</span>192.168.153.136      
    <span class="token key atrule">links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch        
  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>7.8.1
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9200<span class="token punctuation">:</span><span class="token number">9200</span>
      <span class="token punctuation">-</span> 9300<span class="token punctuation">:</span><span class="token number">9300</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> discovery.type=single<span class="token punctuation">-</span>node
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /apps/elasticsearch<span class="token punctuation">-</span>7.8.1/elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml
      <span class="token punctuation">-</span> /apps/elasticsearch<span class="token punctuation">-</span>7.8.1/data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
  <span class="token key atrule">kibana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/kibana/kibana<span class="token punctuation">:</span>7.8.1
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5601<span class="token punctuation">:</span><span class="token number">5601</span>    
<span class="token comment">#    links:</span>
<span class="token comment">#      - elasticsearch      </span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /apps/kibana<span class="token punctuation">-</span>7.8.1<span class="token punctuation">-</span>linux<span class="token punctuation">-</span>x86_64/kibana.yml<span class="token punctuation">:</span>/usr/share/kibana/config/kibana.yml
<span class="token comment">#    environment:</span>
<span class="token comment">#      SERVER_NAME: kibana</span>
<span class="token comment">#      ELASTICSEARCH_HOSTS: http://www.sunrat.com:9200</span>
    <span class="token key atrule">extra_hosts</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> www.sunrat.com<span class="token punctuation">:</span>192.168.153.136
</code></pre></div><p><strong>2. ELK管理</strong></p> <ul><li><p>官网下载对应版本安装包</p></li> <li><p>启动ELK</p></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#前台启动(镜像级)</span>
docker-compose up
<span class="token comment">#后台启动(镜像级)</span>
docker-compose up -d
<span class="token comment">#容器级</span>
docker-compose start
</code></pre></div><ul><li>停止ELK</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#（镜像级）</span>
docker-compose down
<span class="token comment">#容器级</span>
docker-compose stop
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fb1232a2.js" defer></script><script src="/assets/js/2.7b8aa595.js" defer></script><script src="/assets/js/126.d45e23a4.js" defer></script>
  </body>
</html>
