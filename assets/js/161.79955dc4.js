(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{519:function(a,t,s){"use strict";s.r(t);var n=s(44),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7配置mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7配置mongodb"}},[a._v("#")]),a._v(" CentOS7配置MongoDB")]),a._v(" "),s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("p",[a._v("[TOC]")]),a._v(" "),s("p",[s("strong",[a._v("环境：CentOS7")])]),a._v(" "),s("h3",{attrs:{id:"官网-下载mongodb-linux-x86-64-rhel62-3-4-3-tgz"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官网-下载mongodb-linux-x86-64-rhel62-3-4-3-tgz"}},[a._v("#")]),a._v(" ["),s("a",{attrs:{href:"https://www.mongodb.com/download-center#community",target:"_blank",rel:"noopener noreferrer"}},[a._v("官网"),s("OutboundLink")],1),a._v("]下载mongodb-linux-x86_64-rhel62-3.4.3.tgz")]),a._v(" "),s("h3",{attrs:{id:"通过ftp-winscp-filezilla等-工具上传到-apps-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过ftp-winscp-filezilla等-工具上传到-apps-目录"}},[a._v("#")]),a._v(" 通过FTP（WinSCP,FileZilla等）工具上传到“/apps”目录")]),a._v(" "),s("h3",{attrs:{id:"使用解压命令解压到当前目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用解压命令解压到当前目录"}},[a._v("#")]),a._v(" 使用解压命令解压到当前目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zvxf mongodb-linux-x86_64-rhel62-3.4.3.tgz\n")])])]),s("h3",{attrs:{id:"开启27017端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启27017端口"}},[a._v("#")]),a._v(" 开启27017端口")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("firewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v("/tcp --permanent    （--permanent永久生效，没有此参数重启后失效）\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重新载入")]),a._v("\nfirewall-cmd --reload\n")])])]),s("h3",{attrs:{id:"创建data文件夹用于存放数据-创建logs文件用于存放日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建data文件夹用于存放数据-创建logs文件用于存放日志"}},[a._v("#")]),a._v(" 创建data文件夹用于存放数据，创建logs文件用于存放日志")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" mongodb-linux-x86_64-rhel62-3.4.3\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" data\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" logs\n")])])]),s("h3",{attrs:{id:"启动mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动mongodb"}},[a._v("#")]),a._v(" 启动MongoDB")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("/apps/mongodb-linux-x86_64-rhel62-3.4.3/bin/mongod -dbpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/apps/mongodb-linux-x86_64-rhel62-3.4.3/data -logpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/apps/mongodb-linux-x86_64-rhel62-3.4.3/logs  --fork --auth\n")])])]),s("h3",{attrs:{id:"创建超级用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建超级用户"}},[a._v("#")]),a._v(" 创建超级用户")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /apps/mongodb-linux-x86_64-rhel62-3.4.3/bin\n./mongo\nuse admin\ndb.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     user: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin"')]),a._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     pwd: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin"')]),a._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     roles: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"root"')]),a._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"admin"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h3",{attrs:{id:"登陆admin用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登陆admin用户"}},[a._v("#")]),a._v(" 登陆admin用户")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("db.auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'admin'")]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"创建登陆用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建登陆用户"}},[a._v("#")]),a._v(" 创建登陆用户")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("use "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\ndb.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     user: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')]),a._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     pwd: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')]),a._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".     roles: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"readWrite"')]),a._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h3",{attrs:{id:"设置开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动"}},[a._v("#")]),a._v(" 设置开机启动")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置开机启动")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#修改/etc/下的rc.local添加如下命令")]),a._v("\n/apps/mongodb-linux-x86_64-rhel62-3.4.3/bin/mongod -dbpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/apps/mongodb-linux-x86_64-rhel62-3.4.3/data -logpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/apps/mongodb-linux-x86_64-rhel62-3.4.3/logs  --fork --auth\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);