(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{500:function(s,n,t){"use strict";t.r(n);var a=t(27),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("Harbor安装")]),s._v(" "),t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("p",[s._v("[TOC]")]),s._v(" "),t("p",[t("strong",[s._v("主机配置:")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("主机名")]),s._v(" "),t("th",[s._v("IP地址")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("worker")]),s._v(" "),t("td",[s._v("192.168.153.100")])])])]),s._v(" "),t("p",[t("strong",[s._v("系统：CentOS7")])]),s._v(" "),t("p",[t("strong",[s._v("harbor版本：1.9.3")])]),s._v(" "),t("p",[t("strong",[s._v("docker版本：19.03.5")])]),s._v(" "),t("p",[t("strong",[s._v("docker-compose版本：1.25.0")])]),s._v(" "),t("p",[t("strong",[s._v("1. harbor安装")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("从官网下载指定版本安装包，并上传到指定目录")])]),s._v(" "),t("li",[t("p",[s._v("解压安装包")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zvxf harbor-offline-installer-v1.9.3.tgz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("配置harbor.yml")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Configuration file of Harbor")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The IP address or hostname to access admin UI and registry service.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置主机名")]),s._v("\nhostname: worker\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http related config")]),s._v("\nhttp:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# port for http, default is 80. If https enabled, this port will redirect to https port")]),s._v("\n  port: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https related config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # https port for harbor, default is 443")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   port: 443")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # The path of cert and key files for nginx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   certificate: /your/certificate/path")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   private_key: /your/private/key/path")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_url if you want to enable external proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# And when it enabled the hostname will no longer used")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_url: https://reg.mydomain.com:8433")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The initial password of Harbor admin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It only works in first time to install harbor")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Remember Change the admin password from UI after launching Harbor.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置登录密码")]),s._v("\nharbor_admin_password: Worker@1234\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Harbor DB configuration")]),s._v("\ndatabase:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The password for the root user of Harbor DB. Change this before any production use.")]),s._v("\n  password: root123\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The maximum number of connections in the idle connection pool. If it <=0, no idle connections are retained.")]),s._v("\n  max_idle_conns: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The maximum number of open connections to the database. If it <= 0, then there is no limit on the number of open connections.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note: the default number of connections is 100 for postgres.")]),s._v("\n  max_open_conns: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default data volume")]),s._v("\ndata_volume: /data\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Harbor Storage settings by default is using /data dir on local filesystem")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment storage_service setting If you want to using external storage")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# storage_service:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # of registry's and chart repository's containers.  This is usually needed when the user hosts a internal storage with self signed certificate.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   ca_bundle:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # for more info about this configuration please refer https://docs.docker.com/registry/configuration/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   filesystem:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     maxthreads: 100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # set disable to true when you want to disable registry redirect")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   redirect:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     disabled: false")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Clair configuration")]),s._v("\nclair:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The interval of clair updaters, the unit is hour, set to 0 to disable the updaters.")]),s._v("\n  updaters_interval: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n\njobservice:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Maximum number of job workers in job service")]),s._v("\n  max_job_workers: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\nnotification:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Maximum retry count for webhook job")]),s._v("\n  webhook_job_max_retry: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\nchart:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Change the value of absolute_url to enabled can enable absolute url in chart")]),s._v("\n  absolute_url: disabled\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log configurations")]),s._v("\nlog:\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# options are debug, info, warning, error, fatal")]),s._v("\n  level: info\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# configs for logs in local storage")]),s._v("\n  local:\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.")]),s._v("\n    rotate_count: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# are all valid.")]),s._v("\n    rotate_size: 200M\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The directory on your host that store log")]),s._v("\n    location: /var/log/harbor\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment following lines to enable external syslog endpoint.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_endpoint:")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # protocol used to transmit log to external endpoint, options is tcp or udp")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   protocol: tcp")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # The host of external endpoint")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   host: localhost")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # Port of external endpoint")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   port: 5140")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY!")]),s._v("\n_version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),s._v(".0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_database if using external database.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_database:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   harbor:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: harbor_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: harbor_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: harbor_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: harbor_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: harbor_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     max_idle_conns: 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     max_open_conns: 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   clair:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: clair_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: clair_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: clair_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: clair_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: clair_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   notary_signer:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: notary_signer_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: notary_signer_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: notary_signer_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: notary_signer_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: notary_signer_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   notary_server:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: notary_server_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: notary_server_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: notary_server_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: notary_server_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: notary_server_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_redis if using external Redis server")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_redis:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   host: redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   port: 6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   password:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # db_index 0 is for core, it's unchangeable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   registry_db_index: 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   jobservice_db_index: 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   chartmuseum_db_index: 3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment uaa for trusting the certificate of uaa instance that is hosted via self-signed cert.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uaa:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   ca_file: /path/to/ca")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Global proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Config http proxy for components, e.g. http://my.proxy.com:3128")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Components doesn't need to connect to each others via http proxy.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Remove component from `components` array if want disable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for it. If you want use proxy for replication, MUST enable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for core and jobservice, and set `http_proxy` and `https_proxy`.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add domain to the `no_proxy` field, when you want disable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for some special registry.")]),s._v("\nproxy:\n  http_proxy:\n  https_proxy:\n  no_proxy: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,localhost,.local,.internal,log,db,redis,nginx,core,portal,postgresql,jobservice,registry,registryctl,clair\n  components:\n    - core\n    - jobservice\n    - clair\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br")])]),t("ul",[t("li",[s._v("执行install.sh脚本")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./install.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("访问harbor")])]),s._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("http:")]),s._v("//192.168.153.128/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("停止harbor")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker-compose down -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("启动harbor")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker-compose up -d\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[s._v("问题解决")]),s._v(" "),t("p",[s._v("docker login 报错：")]),s._v(" "),t("p",[s._v("Error response from daemon: Get https://192.168.153.130/v2/: dial tcp 192.168.153.130:443: connect: connection refused")]),s._v(" "),t("p",[s._v("问题说明：")]),s._v(" "),t("p",[s._v("这里说拒绝连接，因为我是用http部署的harbor，这里是https://进行访问的，所有出现报错")]),s._v(" "),t("p",[s._v("然后解决这个问题其实就在/etc/docker/daemon.json文件下,添加对私有仓库的认证就可以登录了")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://f1361db2.m.daocloud.io"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.ustc.edu.cn"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://hub-mirror.c.163.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://kfwkfulq.mirror.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://2lqq34jg.mirror.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://pee6w651.mirror.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.docker-cn.com"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"insecure-registries"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.sunrat.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);